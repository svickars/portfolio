var data = [{
    "code": "aaltoan01",
    "draftYear": 1993,
    "pos": "C"
  },
  {
    "code": "aaltomi01",
    "draftYear": 2013,
    "pos": "C"
  },
  {
    "code": "abolsro01",
    "draftYear": 2016,
    "pos": "C"
  },
  {
    "code": "adamlu01",
    "draftYear": 2008,
    "pos": "C"
  },
  {
    "code": "adamske01",
    "draftYear": 1993,
    "pos": "C"
  },
  {
    "code": "aikinju01",
    "draftYear": 2001,
    "pos": "C"
  },
  {
    "code": "alberjo01",
    "draftYear": 2007,
    "pos": "C"
  },
  {
    "code": "allarje01",
    "draftYear": 2007,
    "pos": "C"
  },
  {
    "code": "allisja02",
    "draftYear": 1993,
    "pos": "C"
  },
  {
    "code": "almonco01",
    "draftYear": 2007,
    "pos": "C"
  },
  {
    "code": "almtojo01",
    "draftYear": 2002,
    "pos": "C"
  },
  {
    "code": "amadimi01",
    "draftYear": 2014,
    "pos": "C"
  },
  {
    "code": "anderer01",
    "draftYear": 1997,
    "pos": "C"
  },
  {
    "code": "anderja01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "anderjo03",
    "draftYear": 2007,
    "pos": "C"
  },
  {
    "code": "anderjo04",
    "draftYear": 2003,
    "pos": "C"
  },
  {
    "code": "anderli01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "angelan01",
    "draftYear": 2014,
    "pos": "C"
  },
  {
    "code": "angjo01",
    "draftYear": 2016,
    "pos": "C"
  },
  {
    "code": "anisiar01",
    "draftYear": 2006,
    "pos": "C"
  },
  {
    "code": "antroni01",
    "draftYear": 1998,
    "pos": "C"
  },
  {
    "code": "applema01",
    "draftYear": 2015,
    "pos": "C"
  },
  {
    "code": "arkhide01",
    "draftYear": 1998,
    "pos": "C"
  },
  {
    "code": "armstde01",
    "draftYear": 1992,
    "pos": "C"
  },
  {
    "code": "armstjo01",
    "draftYear": 2006,
    "pos": "C"
  },
  {
    "code": "arnasty01",
    "draftYear": 1998,
    "pos": "C"
  },
  {
    "code": "arnieja01",
    "draftYear": 2008,
    "pos": "C"
  },
  {
    "code": "arnolbi01",
    "draftYear": 2010,
    "pos": "C"
  },
  {
    "code": "arnotja01",
    "draftYear": 1993,
    "pos": "C"
  },
  {
    "code": "asplura01",
    "draftYear": 2016,
    "pos": "C"
  },
  {
    "code": "aubinma01",
    "draftYear": 2005,
    "pos": "C"
  },
  {
    "code": "aubrylo01",
    "draftYear": 2010,
    "pos": "C"
  },
  {
    "code": "audetda01",
    "draftYear": 2014,
    "pos": "C"
  },
  {
    "code": "augerch01",
    "draftYear": 2006,
    "pos": "C"
  },
  {
    "code": "azeveju01",
    "draftYear": 2008,
    "pos": "C"
  },
  {
    "code": "babenyu01",
    "draftYear": 1996,
    "pos": "C"
  },
  {
    "code": "backeda01",
    "draftYear": 2003,
    "pos": "C"
  },
  {
    "code": "backlmi01",
    "draftYear": 2007,
    "pos": "C"
  },
  {
    "code": "backsni02",
    "draftYear": 2006,
    "pos": "C"
  },
  {
    "code": "badinja01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "bailejo01",
    "draftYear": 2008,
    "pos": "C"
  },
  {
    "code": "baileky01",
    "draftYear": 2005,
    "pos": "C"
  },
  {
    "code": "baillro01",
    "draftYear": 2012,
    "pos": "C"
  },
  {
    "code": "balanst01",
    "draftYear": 2004,
    "pos": "C"
  },
  {
    "code": "balisch01",
    "draftYear": 2011,
    "pos": "C"
  },
  {
    "code": "bararda01",
    "draftYear": 2002,
    "pos": "C"
  },
  {
    "code": "barkoal01",
    "draftYear": 2013,
    "pos": "C"
  },
  {
    "code": "barnejo01",
    "draftYear": 2005,
    "pos": "C"
  },
  {
    "code": "barnesc01",
    "draftYear": 1997,
    "pos": "C"
  },
  {
    "code": "barraev01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "barromo01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "barzama01",
    "draftYear": 2015,
    "pos": "C"
  },
  {
    "code": "bassco01",
    "draftYear": 2005,
    "pos": "C"
  },
  {
    "code": "batessh01",
    "draftYear": 1993,
    "pos": "C"
  },
  {
    "code": "bathedr01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "baumda01",
    "draftYear": 2001,
    "pos": "C"
  },
  {
    "code": "beachky01",
    "draftYear": 2008,
    "pos": "C"
  },
  {
    "code": "beaudje01",
    "draftYear": 2015,
    "pos": "C"
  },
  {
    "code": "beckeja01",
    "draftYear": 2015,
    "pos": "C"
  },
  {
    "code": "beechkr01",
    "draftYear": 1999,
    "pos": "C"
  },
  {
    "code": "beginst01",
    "draftYear": 1996,
    "pos": "C"
  },
  {
    "code": "belaner01",
    "draftYear": 1996,
    "pos": "C"
  },
  {
    "code": "bellivi01",
    "draftYear": 2002,
    "pos": "C"
  },
  {
    "code": "bellma01",
    "draftYear": 1998,
    "pos": "C"
  },
  {
    "code": "bemstem01",
    "draftYear": 2017,
    "pos": "C"
  },
  {
    "code": "bennesa01",
    "draftYear": 2014,
    "pos": "C"
  },
  {
    "code": "bergepa01",
    "draftYear": 2003,
    "pos": "C"
  },
  {
    "code": "berglpa01",
    "draftYear": 2006,
    "pos": "C"
  },
  {
    "code": "bertsch02",
    "draftYear": 2012,
    "pos": "C"
  },
  {
    "code": "berziar01",
    "draftYear": 2002,
    "pos": "C"
  },
  {
    "code": "bettsbl01",
    "draftYear": 1998,
    "pos": "C"
  },
  {
    "code": "bettska01",
    "draftYear": 2002,
    "pos": "C"
  },
  {
    "code": "bishocl01",
    "draftYear": 2014,
    "pos": "C"
  },
  {
    "code": "bittewi01",
    "draftYear": 2016,
    "pos": "C"
  },
  {
    "code": "bjugsni01",
    "draftYear": 2010,
    "pos": "C"
  },
  {
    "code": "blackco01",
    "draftYear": 2011,
    "pos": "C"
  }
];

// $CRAPE$
// load modules
var fs = require('fs');
var cheerio = require('cheerio'); // npm install cheerio
var http = require('http');
var request = require('request');

// creat time delay
var delay = Number(Math.random(1000, 10000));

// create empty array to store all data
var advancedStats = [];

for (n in data) {

  // variables for use in scraper
  var playerCode = data[n].code,
    firstSeason = data[n].draftYear,
    position = data[n].pos;

  // run getSkaterData function;
  if (position != 'G') {
    console.log(playerCode)
    setTimeout(getSkaterData(playerCode, firstSeason, position, function(thisGuy, n) {
      writeSkaterData(thisGuy, n);
    }), delay * 1000);
  } else {
    setTimeout(getGoalieData(playerCode, firstSeason, position, function(thisGuy, n) {
      writeGoalieData(thisGuy, n);
    }), delay * 1000);
  };

};

function getSkaterData(playerCode, firstSeason, position, callback) {

  // empty object for this particular player
  var thisGuy = {};

  // add player meta to object
  thisGuy.playerCode = playerCode;
  thisGuy.firstSeason = firstSeason;
  thisGuy.position = position;

  // declare empty variables
  var gamesPlayed_c = 0,
    goals_c = 0,
    assists_c = 0,
    points_c = 0,
    plusMinus_c = 0,
    pim_c = 0,
    evG_c = 0,
    ppG_c = 0,
    shG_c = 0,
    gwG_c = 0,
    evA_c = 0,
    ppA_c = 0,
    shA_c = 0,
    shots_c = 0,
    shotPer_c = 0,
    tsa_c = 0,
    toi_c = 0,
    atoi_c = 0,
    fow_c = 0,
    fol_c = 0,
    foPer_c = 0,
    hit_c = 0,
    blk_c = 0,
    take_c = 0,
    give_c = 0;

  var gamesPlayed_f = 0,
    goals_f = 0,
    assists_f = 0,
    points_f = 0,
    plusMinus_f = 0,
    pim_f = 0,
    evG_f = 0,
    ppG_f = 0,
    shG_f = 0,
    gwG_f = 0,
    evA_f = 0,
    ppA_f = 0,
    shA_f = 0,
    shots_f = 0,
    shotPer_f = 0,
    tsa_f = 0,
    toi_f = 0,
    atoi_f = 0,
    fow_f = 0,
    fol_f = 0,
    foPer_f = 0,
    hit_f = 0,
    blk_f = 0,
    take_f = 0,
    give_f = 0;

  // advanced stats
  var corsiF_c = 0,
    corsiA_c = 0,
    corsiFper_c = 0,
    corsiFperRel_c = 0,
    fenF_c = 0,
    fenA_c = 0,
    fenFper_c = 0,
    fenFperRel_c = 0,
    oiSHper_c = 0,
    oiSVper_c = 0,
    pdo_c = 0,
    oZSper_c = 0,
    dZSper_c = 0;

  var corsiF_f = 0,
    corsiA_f = 0,
    corsiFper_f = 0,
    corsiFperRel_f = 0,
    fenF_f = 0,
    fenA_f = 0,
    fenFper_f = 0,
    fenFperRel_f = 0,
    oiSHper_f = 0,
    oiSVper_f = 0,
    pdo_f = 0,
    oZSper_f = 0,
    dZSper_f = 0;

  // misc stats
  var goalsCreated_c = 0,
    goalsCreated_pg_c = 0,
    shots_pg_c = 0,
    ops_c = 0,
    dps_c = 0,
    ps_c = 0;

  var goalsCreated_f = 0,
    goalsCreated_pg_f = 0,
    shots_pg_f = 0,
    ops_f = 0,
    dps_f = 0,
    ps_f = 0;

  // load file for this player git 'er going
  var content = fs.readFileSync('./html_edited/' + playerCode + '.html');
  var $ = cheerio.load(content);

  // get his career numbers
  gamesPlayed_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(5)').html());
  goals_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(6)').html());
  assists_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(7)').html());
  points_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(8)').html());
  plusMinus_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(9)').html());
  pim_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(10)').html());
  evG_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(11)').html());
  ppG_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(12)').html());
  shG_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(13)').html());
  gwG_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(14)').html());
  evA_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(15)').html());
  ppA_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(16)').html());
  shA_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(17)').html());
  shots_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(18)').html());
  shotPer_c = parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(19)').html());
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(20)').html())) === false) {
    tsa_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(20)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(21)').html())) === false) {
    toi_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(21)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(22)').html())) === false) {
    atoi_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(22)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(23)').html())) === false) {
    fow_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(23)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(24)').html())) === false) {
    fol_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(24)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(25)').html())) === false) {
    foPer_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(25)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(26)').html())) === false) {
    hit_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(26)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(27)').html())) === false) {
    blk_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(27)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(28)').html())) === false) {
    take_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(28)').html());
  };
  if (isNaN(parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(29)').html())) === false) {
    give_c += parseFloat($('table').find('tfoot').find('tr:last-child').find('td:nth-child(29)').html());
  };


  // ------------------------------------------------------------------------------------------------------------------------

  console.log($('#all_stats_basic_nhl').find('tbody').find('tr:nth-child(1)').find('th').html())
  console.log($('#all_stats_basic_plus_nhl').find('tbody').find('tr:nth-child(1)').find('th').html())

  // if ($('#all_stats_basic_nhl').find('tbody').find('tr:nth-child(1)').find('th').html() != null && $('#all_stats_basic_plus_nhl').find('tbody').find('tr:nth-child(1)').find('th').html() != null) {
  //   console.log('yes');
  // } else {
  //   // console.log('no')
  // }


  // // get his numbers from the first five years of his career
  // if ($('#all_stats_basic_plus_nhl').find('tbody').find('tr:nth-child(1)').find('th').html() != null) {
  //   for (var i = 0; i < 5; i++) {
  //
  //     var year = $('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('th').html().split('-')[0];
  //     var league = $('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(4)').find('a').html();
  //
  //     if (year < firstSeason + 5 && league === 'NHL') {
  //       gamesPlayed_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(5)').html());
  //       goals_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(6)').html());
  //       assists_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(7)').html());
  //       points_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(8)').html());
  //       plusMinus_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(9)').html());
  //       pim_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(10)').html());
  //       evG_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(11)').html());
  //       ppG_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(12)').html());
  //       shG_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(13)').html());
  //       gwG_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(14)').html());
  //       evA_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(15)').html());
  //       ppA_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(16)').html());
  //       shA_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(17)').html());
  //       shots_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(18)').html());
  //       shotPer_f = parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(19)').html());
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(20)').html())) === false) {
  //         tsa_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(20)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(21)').html())) === false) {
  //         toi_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(21)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(22)').html())) === false) {
  //         atoi_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(22)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(23)').html())) === false) {
  //         fow_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(23)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(24)').html())) === false) {
  //         fol_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(24)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(25)').html())) === false) {
  //         foPer_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(25)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(26)').html())) === false) {
  //         hit_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(26)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(27)').html())) === false) {
  //         blk_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(27)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(28)').html())) === false) {
  //         take_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(28)').html());
  //       };
  //       if (isNaN(parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(29)').html())) === false) {
  //         give_f += parseFloat($('table').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(29)').html());
  //       };
  //     }
  //   }
  // };

  // ------------------------------------------------------------------------------------------------------------------------

  // get his advanced stats
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(7)').html())) === false) {
    corsiF_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(7)').html());
  } else {
    corsiF_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(8)').html())) === false) {
    corsiA_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(8)').html());
  } else {
    corsiA_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(9)').html())) === false) {
    corsiFper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(9)').html());
  } else {
    corsiFper_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(10)').html())) === false) {
    corsiFperRel_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(10)').html());
  } else {
    corsiFperRel_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(11)').html())) === false) {
    fenF_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(11)').html());
  } else {
    fenF_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(12)').html())) === false) {
    fenA_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(12)').html());
  } else {
    fenA_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(13)').html())) === false) {
    fenFper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(13)').html());
  } else {
    fenFper_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(14)').html())) === false) {
    fenFperRel_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(14)').html());
  } else {
    fenFperRel_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(15)').html())) === false) {
    oiSHper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(15)').html());
  } else {
    oiSHper_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(16)').html())) === false) {
    oiSVper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(16)').html());
  } else {
    oiSVper_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(17)').html())) === false) {
    pdo_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(17)').html());
  } else {
    pdo_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(18)').html())) === false) {
    oZSper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(18)').html());
  } else {
    oZSper_c = null;
  }
  if (isNaN(parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(19)').html())) === false) {
    dZSper_c += parseFloat($('#all_skaters_advanced').find('tfoot').find('tr:last-child').find('td:nth-child(19)').html());
  } else {
    dZSper_c = null;
  }


  // ------------------------------------------------------------------------------------------------------------------------


  // // get his advanced stats from the first five years of his career
  // if ($('#all_skaters_advanced').find('tbody').find('tr:nth-child(1)').find('th').html() != null) {
  //   for (var i = 0; i < 5; i++) {
  //     var year2 = $('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('th').html().split('-')[0];
  //
  //     if (year2 < parseFloat(firstSeason + 5)) {
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(7)').html())) === false) {
  //         corsiF_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(7)').html());
  //       } else {
  //         corsiF_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(8)').html())) === false) {
  //         corsiA_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(8)').html());
  //       } else {
  //         corsiA_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(9)').html())) === false) {
  //         corsiFper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(9)').html());
  //       } else {
  //         corsiFper_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(10)').html())) === false) {
  //         corsiFperRel_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(10)').html());
  //       } else {
  //         corsiFperRel_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(11)').html())) === false) {
  //         fenF_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(11)').html());
  //       } else {
  //         fenF_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(12)').html())) === false) {
  //         fenA_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(12)').html());
  //       } else {
  //         fenA_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(13)').html())) === false) {
  //         fenFper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(13)').html());
  //       } else {
  //         fenFper_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(14)').html())) === false) {
  //         fenFperRel_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(14)').html());
  //       } else {
  //         fenFperRel_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(15)').html())) === false) {
  //         oiSHper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(15)').html());
  //       } else {
  //         oiSHper_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(16)').html())) === false) {
  //         oiSVper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(16)').html());
  //       } else {
  //         oiSVper_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(17)').html())) === false) {
  //         pdo_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(17)').html());
  //       } else {
  //         pdo_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(18)').html())) === false) {
  //         oZSper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(18)').html());
  //       } else {
  //         oZSper_f = null;
  //       }
  //       if (isNaN(parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(19)').html())) === false) {
  //         dZSper_f += parseFloat($('#all_skaters_advanced').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(19)').html());
  //       } else {
  //         dZSper_f = null;
  //       }
  //     }
  //   };
  // };

  // ------------------------------------------------------------------------------------------------------------------------

  // get his misc stats
  goalsCreated_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(6)').html());
  goalsCreated_pg_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(10)').html());
  shots_pg_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(12)').html());
  ops_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(22)').html());
  dps_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(23)').html());
  ps_c += parseFloat($('#all_stats_misc_nhl').find('tfoot').find('tr:last-child').find('td:nth-child(24)').html());


  // ------------------------------------------------------------------------------------------------------------------------


  // // get his misc stats for first five years
  // if ($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(1)').find('th').html() != null) {
  //   for (var i = 0; i < 5; i++) {
  //     var year2 = $('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('th').html().split('-')[0];
  //
  //     if (year2 < parseFloat(firstSeason + 5)) {
  //       goalsCreated_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(6)').html());
  //       goalsCreated_pg_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(10)').html());
  //       shots_pg_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(12)').html());
  //       ops_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(22)').html());
  //       dps_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(23)').html());
  //       ps_f += parseFloat($('#all_stats_misc_nhl').find('tbody').find('tr:nth-child(' + (i + 1) + ')').find('td:nth-child(24)').html());
  //     }
  //   }
  // }

  // ------------------------------------------------------------------------------------------------------------------------




  // add career numbers to thisGuy object
  thisGuy.gamesPlayed_c = gamesPlayed_c;
  thisGuy.goals_c = goals_c;
  thisGuy.assists_c = assists_c;
  thisGuy.points_c = points_c;
  thisGuy.plusMinus_c = plusMinus_c;
  thisGuy.pim_c = pim_c;
  thisGuy.evG_c = evG_c;
  thisGuy.ppG_c = ppG_c;
  thisGuy.shG_c = shG_c;
  thisGuy.gwG_c = gwG_c;
  thisGuy.evA_c = evA_c;
  thisGuy.ppA_c = ppA_c;
  thisGuy.shA_c = shA_c;
  thisGuy.shots_c = shots_c;
  thisGuy.shotPer_c = goals_c / shots_c;
  thisGuy.tsa_c = tsa_c;
  thisGuy.toi_c = toi_c;
  thisGuy.atoi_c = toi_c / gamesPlayed_c;
  thisGuy.fow_c = fow_c;
  thisGuy.fol_c = fol_c;
  thisGuy.foPer_c = fow_c / (fow_c + fol_c);
  thisGuy.hit_c = hit_c;
  thisGuy.blk_c = blk_c;
  thisGuy.take_c = take_c;
  thisGuy.give_c = give_c;

  // add career advanced numbers
  thisGuy.corsiF_c = corsiF_c;
  thisGuy.corsiA_c = corsiA_c;
  thisGuy.corsiFper_c = corsiFper_c;
  thisGuy.corsiFperRel_c = corsiFperRel_c;
  thisGuy.fenF_c = fenF_c;
  thisGuy.fenA_c = fenA_c;
  thisGuy.fenFper_c = fenFper_c;
  thisGuy.fenFperRel_c = fenFperRel_c;
  thisGuy.oiSHper_c = oiSHper_c;
  thisGuy.oiSVper_c = oiSVper_c;
  thisGuy.pdo_c = pdo_c;
  thisGuy.oZSper_c = oZSper_c;
  thisGuy.dZSper_c = dZSper_c;

  // add misc numbers from whole career
  thisGuy.goalsCreated_c = goalsCreated_c;
  thisGuy.goalsCreated_pg_c = goalsCreated_pg_c;
  thisGuy.shots_pg_c = shots_pg_c;
  thisGuy.ops_c = ops_c;
  thisGuy.dps_c = dps_c;
  thisGuy.ps_c = ps_c;

  // add numbers from first five years to thisGuy object
  thisGuy.gamesPlayed_f = gamesPlayed_f;
  thisGuy.goals_f = goals_f;
  thisGuy.assists_f = assists_f;
  thisGuy.points_f = points_f;
  thisGuy.plusMinus_f = plusMinus_f;
  thisGuy.pim_f = pim_f;
  thisGuy.evG_f = evG_f;
  thisGuy.ppG_f = ppG_f;
  thisGuy.shG_f = shG_f;
  thisGuy.gwG_f = gwG_f;
  thisGuy.evA_f = evA_f;
  thisGuy.ppA_f = ppA_f;
  thisGuy.shA_f = shA_f;
  thisGuy.shots_f = shots_f;
  thisGuy.shotPer_f = shotPer_f / 5;
  thisGuy.tsa_f = tsa_f;
  thisGuy.toi_f = toi_f;
  thisGuy.atoi_f = atoi_f / 5;
  thisGuy.fow_f = fow_f;
  thisGuy.fol_f = fol_f;
  thisGuy.foPer_f = foPer_f / 5;
  thisGuy.hit_f = hit_f;
  thisGuy.blk_f = blk_f;
  thisGuy.take_f = take_f;
  thisGuy.give_f = give_f;

  // add advanced stats from first five years
  thisGuy.corsiF_f = corsiF_f;
  thisGuy.corsiA_f = corsiA_f;
  thisGuy.corsiFper_f = corsiF_f / (corsiF_f + corsiA_f);
  thisGuy.corsiFperRel_f = corsiFperRel_f;
  thisGuy.fenF_f = fenF_f;
  thisGuy.fenA_f = fenA_f;
  thisGuy.fenFper_f = fenF_f / (fenF_f + fenA_f);
  thisGuy.fenFper_f = fenFper_f;
  thisGuy.fenFperRel_f = fenFperRel_f;
  thisGuy.oiSHper_f = oiSHper_f / 5;
  thisGuy.oiSVper_f = oiSVper_f / 5;
  thisGuy.pdo_f = pdo_f / 5;
  thisGuy.oZSper_f = oZSper_f / 5;
  thisGuy.dZSper_f = dZSper_f / 5;

  // add misc numbers from first five years
  thisGuy.goalsCreated_f = goalsCreated_f;
  thisGuy.goalsCreated_pg_f = goalsCreated_pg_f;
  thisGuy.shots_pg_f = shots_pg_f;
  thisGuy.ops_f = ops_f;
  thisGuy.dps_f = dps_f;
  thisGuy.ps_f = ps_f;

  callback(thisGuy, n);

};


function writeSkaterData(thisGuy, n) {
  // write thisGuy data to advancedStats array
  advancedStats.push(thisGuy);
  // write data to file
  fs.writeFile("advancedStats.json", JSON.stringify(advancedStats), (err) => {
    if (err) {
      console.error(err);
      return;
    };
    console.log("success " + n + "/" + data.length);
  });
}

function getGoalieData(playerCode, firstSeason, position, callback) {

};


function writeGoalieData(thisGuy) {
  console.log(thisGuy);
}
