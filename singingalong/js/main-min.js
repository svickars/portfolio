function selectDataS1(){var t=this.value;"his"===t?s1drawNew("following","his","hers","all"):"him"===t?s1drawNew("preceding","him","her","all"):s1drawNew("following","he","she","all")}function s1drawNew(t,e,a,r){$(".s1container").fadeOut(function(){$(".s1l").html('<div class="s1legend s1legendR">Most common words <strong>'+t+" "+e+"</strong></div>"),$(".s1r").html('<div class="s1legend s1legendL">Most common words <strong>'+t+" "+a+"</strong></div>");var s=d3.select(".s1l").append("div").attr("class","s1container"),n=d3.select(".s1r").append("div").attr("class","s1container");d3.csv("data/s1.csv",function(t){for(var i=0;i<t.length;i++)t[i].year===r&&t[i].category===e&&s.append("span").attr("class","s1word").html(t[i].word).style("color",mS1(t[i].total)).style("opacity",0).transition().duration(750).style("opacity",1);for(var i=0;i<t.length;i++)t[i].year===r&&t[i].category===a&&n.append("span").attr("class","s1word").html(t[i].word).style("color",fS1(t[i].total)).style("opacity",0).transition().duration(750).style("opacity",1)})}).fadeIn()}function s4selectData(){var t=this.value;removeLines(t),setTimeout(function(){drawLines(t),loadWordSearch(t)},500)}function removeLines(t){var e,e=d3.selectAll(".s4line:not(."+t+")"),a=e.node().getTotalLength();e.attr("stroke-dashoffset",0).transition().duration(500).attr("stroke-dasharray",a+" "+a).attr("stroke-dashoffset",-a).style("opacity",0).transition().delay(500).duration(100).style("display","none")}function drawLines(t){d3.selectAll(".s4options").remove();var e=s4svg.append("text").attr("class","s4mouselabelBG").style("display","none"),a=s4svg.append("text").attr("class","s4mouselabel").style("display","none"),r=d3.selectAll("."+t);isMobile?r.on("click",function(t){d3.selectAll(".s4line:not(this)").style("opacity",.1),d3.select(this).style("stroke-width",2),d3.select(this).style("opacity",1),selectLine(t.key)}).on("mouseout",function(t){clickable||(d3.select(this).style("stroke-width",.2),d3.selectAll(".s4mouselabelBG").style("display","none"),d3.selectAll(".s4mouselabel").style("display","none"),deselectLine())}):r.on("mouseover",function(t){clickable||(d3.select(this).style("stroke-width",2),d3.select(this).style("opacity",1),d3.select(".s4mouselabelBG").style("display","block").attr("x",d3.mouse(this)[0]).attr("y",d3.mouse(this)[1]).text(t.key.split("-")[1]),d3.select(".s4mouselabel").style("display","block").attr("x",d3.mouse(this)[0]).attr("y",d3.mouse(this)[1]).text(t.key.split("-")[1]))}).on("click",function(t){d3.selectAll(".s4line:not(this)").style("opacity",.1),d3.select(this).style("stroke-width",2),d3.select(this).style("opacity",1),selectLine(t.key)}).on("mouseout",function(t){clickable||(d3.select(this).style("stroke-width",.2),d3.selectAll(".s4mouselabelBG").style("display","none"),d3.selectAll(".s4mouselabel").style("display","none"),deselectLine())});var s=r.node().getTotalLength(),n=500;r.style("display","block").attr("stroke-dasharray",s+" "+s).attr("stroke-dashoffset",-s).transition().duration(500).style("opacity",1).attr("stroke-dashoffset",0)}function createLines(){s4svg.append("g").attr("class","x axis s4xa").call(s4xAxisM),s4svg.append("g").attr("class","x axis s4xa").call(s4xAxisF),s4svg.append("g").attr("class","x axis s4xa").attr("transform","translate(0,"+parseInt(-s4height-25)+")").call(s4xAxisM),s4svg.append("g").attr("class","x axis s4xa").attr("transform","translate(0,"+parseInt(-s4height-25)+")").call(s4xAxisF),s4svg.append("g").attr("class","y axis s4yt").attr("transform","translate("+parseInt(s4width/2+3)+",0)").call(s4yAxis),s4svg.append("g").attr("class","y axis s4ya").attr("transform","translate("+parseInt(s4width/2+3)+",0)").call(s4yAxis),d3.csv("data/s4c.csv",function(t,e){if(t)throw t;e.forEach(function(t){t.year=parseInt(t.year),t.totalPer=+t.totalPer,t.pronounWord2=t.word1+"-"+t.word2}),Clinenest=d3.nest().key(function(t){return t.pronounWord2}).entries(e);var a=s4svg.selectAll(".Cline").data(Clinenest).enter().append("path").attr("class",function(t){return"line s4line Cline "+t.key}).attr("d",function(t){return valueLine(t.values)}).style("opacity",0).style("display","none").style("stroke",function(t){var e=t.key.split("-")[0];return"he"===e||"his"===e||"him"===e||"hims"===e?"#027296":"she"===e||"hers"===e||"her"===e?"#fa4d16":void 0})}),d3.csv("data/s4b.csv",function(t,e){if(t)throw t;e.forEach(function(t){t.year=parseInt(t.year),t.totalPer=+t.totalPer,t.pronounWord2=t.word1+"-"+t.word2}),Blinenest=d3.nest().key(function(t){return t.pronounWord2}).entries(e);var a=s4svg.selectAll(".Bline").data(Blinenest).enter().append("path").attr("class",function(t){return"line s4line Bline "+t.key}).attr("d",function(t){return valueLine(t.values)}).style("opacity",0).style("display","none").style("stroke",function(t){var e=t.key.split("-")[0];return"he"===e||"his"===e||"him"===e||"hims"===e?"#027296":"she"===e||"hers"===e||"her"===e?"#fa4d16":void 0})}),d3.csv("data/s4a.csv",function(t,e){if(t)throw t;e.forEach(function(t){t.year=parseInt(t.year),t.totalPer=+t.totalPer,t.pronounWord2=t.word1+"-"+t.word2}),Alinenest=d3.nest().key(function(t){return t.pronounWord2}).entries(e),console.log(Alinenest);var a=s4svg.selectAll(".Aline").data(Alinenest).enter().append("path").attr("class",function(t){return"line s4line Aline "+t.key}).attr("d",function(t){return valueLine(t.values)}).style("opacity",0).style("display","none").style("stroke",function(t){var e=t.key.split("-")[0];return"he"===e||"his"===e||"him"===e||"hims"===e?"#027296":"she"===e||"hers"===e||"her"===e?"#fa4d16":void 0})})}function loadWordSearch(t){var e;e="Aline"===t?Alinenest:"Bline"===t?Blinenest:Clinenest;var a=d3.select(".s4wordsearch");$(".s4wordsearch").select2({placeholder:"Find a word...",allowClear:!0,width:"150px"}),$(".s4wordsearch").on("select2:select",wordsearch),$(".s4wordsearch").on("select2:unselect",wordsearchClear),a.append("option").attr("value","").text(""),a.selectAll("option").data(e).enter().append("option").attr("class","s4options").attr("value",function(t){return t.key}).text(function(t){var e=t.key.split("-")[0],a=t.key.split("-")[1];return"her"===e||"him"===e?a+" ("+e+")":"hers"===e?"("+(e="her")+") "+a:"hims"===e?"("+(e="him")+") "+a:"("+e+") "+a});var r=d3.select(".s4").append("div").attr("class","s4databox")}function wordsearch(){var t=$(".s4wordsearch").val();selectLine(t),null!=t&&(d3.selectAll(".s4line").style("opacity",.1),d3.selectAll("."+t).style("opacity",1).style("stroke-width","2px"))}function wordsearchClear(){deselectLine(),d3.selectAll(".s4line").style("opacity",1).style("stroke-width",".2px")}function selectLine(t){var e=t.split("-")[0],a=t.split("-")[1],r,s;s="she"===e||"he"===e?Alinenest.filter(function(e){return e.key===t}):"hims"===e||"hers"===e||"his"===e?Blinenest.filter(function(e){return e.key===t}):Clinenest.filter(function(e){return e.key===t});var n=s[0].values;s4svg.selectAll(".s4circle").data(n).enter().append("circle").attr("class","s4circle").attr("r",3).attr("cx",function(t){return"he"===t.word1||"his"===t.word1||"him"===t.word1?s4xM(+t.totalPer):"she"===t.word1||"hers"===t.word1||"her"===t.word1?s4xF(+t.totalPer):void 0}).attr("cy",function(t){return s4y(t.year)}).style("fill",function(t){return"he"===e||"his"===e||"him"===e||"hims"===e?"#027296":"she"===e||"hers"===e||"her"===e?"#fa4d16":void 0}).style("opacity",0).transition().duration(200).style("opacity",1),s4svg.selectAll(".s4labelsBG").data(n).enter().append("text").attr("class","s4labelsBG").attr("x",function(t,e){return"he"===t.word1||"his"===t.word1||"him"===t.word1?s4xM(+t.totalPer):"she"===t.word1||"hers"===t.word1||"her"===t.word1?s4xF(+t.totalPer):void 0}).attr("y",function(t){return s4y(t.year)}).attr("dy",3).attr("dx",10).text(function(t,e){return t.totalPer}),s4svg.selectAll(".s4labels").data(n).enter().append("text").attr("class","s4labels").attr("x",function(t,e){return"he"===t.word1||"his"===t.word1||"him"===t.word1?s4xM(+t.totalPer):"she"===t.word1||"hers"===t.word1||"her"===t.word1?s4xF(+t.totalPer):void 0}).attr("y",function(t){return s4y(t.year)}).attr("dy",3).attr("dx",10).text(function(t,e){return t.totalPer}),d3.select(".s4databox").style("display","block"),"her"===e||"him"===e?r=a+" ("+e+")":"hers"===e?(e="her",r="("+e+") "+a):"hims"===e?(e="him",r="("+e+") "+a):r="("+e+") "+a,$(".s4databox").html(r+"<div class='s4db-c'>Heard</div>"),n.length>3?d3.select(".s4db-c").append("span").html(" from "+n[0].year+"&mdash;"+n[n.length-1].year):1===n.length?d3.select(".s4db-c").append("span").html(" in "+n[0].year+"."):2===n.length?d3.select(".s4db-c").append("span").html(" in "+n[0].year+" and "+n[1].year+"."):d3.select(".s4db-c").append("span").html(" in "+n[0].year+", "+n[1].year+" and "+n[2].year+"."),setTimeout(function(t){clickable=!0},50)}function deselectLine(){d3.select(".s4databox").style("display","none"),d3.selectAll(".s4circle").remove(),d3.selectAll(".s4labels").remove(),d3.selectAll(".s4labelsBG").remove()}function selectDataset(){var t=this.value;s2pronoun=t,change(dataset[t+"_"+s2genre],!1)}function selectGenre(){var t=this.value;s2genre=t,changeGenre(dataset[s2pronoun+"_"+t])}function change(t,e){var a=d3.extent(t,function(t){return t.logratio});colourS2.domain([a[0],0,a[1]]),t.sort(function(t,e){return d3.ascending(t.logratio,e.logratio)}),y.domain(t.map(function(t){return t.word})),x.domain([-6,6]),!0===e&&(svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),svg.select(".y.axis").remove(),svg.select(".x.axis").remove());var r=svg.selectAll(".s2label").data(t,function(t){return t.word});r.enter().append("text").attr("class","s2label").attr("x",x(0)).attr("y",function(t){return y(t.word)}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("fill","#ffffff").style("opacity",0).transition().delay(500).ease(d3.easeExp,3).duration(750).attr("x",function(t){return t.logratio<0?x(t.logratio)-10:x(t.logratio)+10}).attr("y",function(t){return y(t.word)}).text(function(t){return t.word}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("fill","#b5b5b5").style("opacity",1),r.exit().transition().ease(d3.easeExp,3).duration(750).attr("x",x(0)).attr("height",y.bandwidth()).style("fill","#ffffff").style("opacity",0).remove(),r.transition().duration(500).attr("x",function(t){return t.logratio<0?x(t.logratio)-10:x(t.logratio)+10}).attr("y",function(t){return y(t.word)}).text(function(t){return t.word}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("fill","#b5b5b5").style("opacity",1);var s=svg.selectAll(".bar").data(t,function(t){return t.word});s.enter().append("rect").attr("class","bar").attr("x",x(0)).attr("y",function(t){return y(t.word)}).attr("width",0).attr("height",y.bandwidth()).style("fill","#ffffff").transition().delay(500).ease(d3.easeExp,3).duration(750).attr("x",function(t){return x(t.logratio<0?t.logratio:0)}).attr("y",function(t){return y(t.word)}).attr("width",function(t){return Math.abs(x(t.logratio)-x(0))}).attr("height",y.bandwidth()).style("fill",function(t){return colourS2(t.logratio)}),s.exit().transition().ease(d3.easeExp,3).duration(750).attr("x",x(0)).attr("width",0).attr("height",y.bandwidth()).remove(),s.transition().ease(d3.easeExp,3).duration(750).attr("x",function(t){return x(t.logratio<0?t.logratio:0)}).attr("y",function(t){return y(t.word)}).attr("width",function(t){return Math.abs(x(t.logratio)-x(0))}).attr("height",y.bandwidth()).style("fill",function(t){return colourS2(t.logratio)})}function changeGenre(t){t.sort(function(t,e){return d3.ascending(t.logratio,e.logratio)}),y.domain(t.map(function(t){return t.word})),x.domain([-6,6]);var e=svg.selectAll(".s2label").data(t,function(t){return t.word});e.enter().append("text").attr("class","s2label").attr("x",function(t){return t.logratio<0?x(t.logratio)-10:x(t.logratio)+10}).attr("y",function(t){return y(t.word)}).text(function(t){return t.word}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("opacity",0).transition().duration(500).attr("x",function(t){return t.logratio<0?x(t.logratio)-10:x(t.logratio)+10}).attr("y",function(t){return y(t.word)}).text(function(t){return t.word}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("fill","#b5b5b5").style("opacity",1),e.exit().transition().duration(250).style("opacity",0).remove(),e.transition().duration(500).attr("x",function(t){return t.logratio<0?x(t.logratio)-10:x(t.logratio)+10}).attr("y",function(t){return y(t.word)}).text(function(t){return t.word}).attr("text-anchor",function(t){return t.logratio<0?"end":"start"}).attr("dy",14).style("fill","#b5b5b5").style("opacity",1);var a=svg.selectAll(".bar").data(t,function(t){return t.word});a.enter().append("rect").attr("class","bar").attr("x",function(t){return x(t.logratio<0?t.logratio:0)}).attr("y",function(t){return y(t.word)}).attr("width",function(t){return Math.abs(x(t.logratio)-x(0))}).attr("height",y.bandwidth()).style("fill","#ffffff").style("opacity",0).transition().duration(500).attr("x",function(t){return x(t.logratio<0?t.logratio:0)}).attr("y",function(t){return y(t.word)}).attr("width",function(t){return Math.abs(x(t.logratio)-x(0))}).attr("height",y.bandwidth()).style("fill",function(t){return colourS2(t.logratio)}).style("opacity",1),a.exit().transition().duration(250).style("fill","#ffffff").style("opacity",0).remove(),a.transition().duration(500).attr("x",function(t){return x(t.logratio<0?t.logratio:0)}).attr("y",function(t){return y(t.word)}).attr("width",function(t){return Math.abs(x(t.logratio)-x(0))}).attr("height",y.bandwidth()).style("fill",function(t){return colourS2(t.logratio)}).style("opacity",1)}function selectRadarData(){var t=this.value;"his"===t?(updateRadar(data_his,overall_his),setTimeout(function(){drawRadar(data_his,overall_his,"his/her",words_his,extrawords_his)},500)):"him"===t?(updateRadar(data_him,overall_him),setTimeout(function(){drawRadar(data_him,overall_him,"him/her",words_him,extrawords_him)},500)):(updateRadar(data_he,overall_he),setTimeout(function(){drawRadar(data_he,overall_he,"he/she",words_he,extrawords_he)},500))}function drawRadar(t,e,a,r,s){for(i=0;i<t.length;i++){var n=".s3-"+i;RadarChart(n,t[i].dataset[0],t[i],radarChartOptions,e[i],a,r[i],s[i])}}function updateRadar(t,e){for(i=0;i<t.length;i++){var a=".s3-"+i;UpdateRadarChart(a,t[i].dataset[0],radarChartOptions,e[i])}}var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),jQuery(document).ready(function($){function t(){var t=$(".cd-main-nav-wrapper");e()?(t.detach(),t.insertBefore(".cd-nav-trigger")):(t.detach(),t.insertAfter(".cd-main-content"))}function e(){return"mobile"!=window.getComputedStyle(document.querySelector("header"),"::before").getPropertyValue("content").replace(/"/g,"").replace(/'/g,"")}t(),$(window).on("resize",function(){window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,300)}),$(".cd-nav-trigger").on("click",function(t){t.preventDefault(),$("header").hasClass("nav-is-visible")&&$(".moves-out").removeClass("moves-out"),$("header").toggleClass("nav-is-visible"),$(".cd-main-nav").toggleClass("nav-is-visible"),$(".cd-main-content").toggleClass("nav-is-visible")}),$(".go-back").on("click",function(t){t.preventDefault(),$(".cd-main-nav").removeClass("moves-out")}),$(".cd-subnav-trigger").on("click",function(t){t.preventDefault(),$(".cd-main-nav").toggleClass("moves-out"),$("#menulink").toggleClass(".menulink-opp"),$(".cd-logo").toggleClass(".cd-logo-opp")})});var titleHeight=$(".title").height();$(window).scroll(function(){$(window).width()>768?$(window).scrollTop()>titleHeight?$(".project-info").css("position","fixed").css("top","0"):$(".project-info").css("position","static"):($(window).scrollTop(),$(".project-info").css("position","static"))}),$(".btn-group > .btn").click(function(){$(this).addClass("active").siblings().removeClass("active")});var mS1=d3.scaleLinear().domain([10,150]).interpolate(d3.interpolateHcl).range([d3.rgb("#88cae3"),d3.rgb("#027296")]),fS1=d3.scaleLinear().domain([10,150]).interpolate(d3.interpolateHcl).range([d3.rgb("#fdae95"),d3.rgb("#fa4d16")]);d3.selectAll(".countsData").on("change",selectDataS1),d3.csv("data/s1.csv",function(t){for(var e=d3.select(".s1l").append("div").attr("class","s1container"),a=d3.select(".s1r").append("div").attr("class","s1container"),r=0;r<t.length;r++)"all"===t[r].year&&"he"===t[r].category&&e.append("span").attr("class","s1word").html(t[r].word).style("color",mS1(t[r].total));for(var r=0;r<t.length;r++)"all"===t[r].year&&"she"===t[r].category&&a.append("span").attr("class","s1word").html(t[r].word).style("color",fS1(t[r].total))}),d3.selectAll(".lineData").on("change",s4selectData);var s4margin={top:30,right:60,bottom:10,left:60},s4width=$(".section4").width()-s4margin.left-s4margin.right,s4height=$(".section4").height()-s4margin.top-s4margin.bottom,s4svg=d3.select(".section4").append("svg").style("width",s4width+s4margin.left+s4margin.right+"px").style("height",s4height+s4margin.top+s4margin.bottom+"px").attr("width",s4width+s4margin.left+s4margin.right).attr("height",s4height+s4margin.top+s4margin.bottom).append("g").attr("transform","translate("+s4margin.left+","+s4margin.top+")").attr("class","svg"),s4xF=d3.scaleTime().range([s4width/2,s4width/2+s4width/2*.33,s4width/2+s4width/2*.67,s4width]),s4xM=d3.scaleTime().range([s4width/2,s4width/2*.67,s4width/2*.33,0]),s4y=d3.scaleLinear().domain([1967,2010]).range([s4height,0]);s4xM.domain([0,10,25,100]),s4xF.domain([0,10,25,100]);var Alinenest,Blinenest,Clinenest,valueLine=d3.line().curve(d3.curveCatmullRom).x(function(t){return"he"===t.word1||"his"===t.word1||"him"===t.word1||"hims"===t.word1?s4xM(+t.totalPer):"she"===t.word1||"hers"===t.word1||"her"===t.word1?s4xF(+t.totalPer):void 0}).y(function(t){return s4y(t.year)}),s4xAxisM=d3.axisBottom(s4xM).tickSize(s4height).tickValues([0,10,20,40,80]).tickFormat(d3.format(".2r")),s4xAxisF=d3.axisBottom(s4xF).tickSize(s4height).tickValues([0,10,20,40,80]).tickFormat(d3.format(".2r")),s4yAxis=d3.axisLeft(s4y).tickSize(0).tickFormat(d3.format(""));createLines(),setTimeout(function(){drawLines("Aline"),loadWordSearch("Aline")},1e3);var wordsearched=!1,clickable=!1;$(".s4").on("click",function(){clickable&&(deselectLine(),d3.selectAll(".s4line").style("opacity",1).style("stroke-width",".2px"),setTimeout(function(){clickable=!1},100))});var s2genre="all",s2pronoun="he";d3.selectAll(".dataset").on("change",selectDataset),$(".s2genre_select").select2({placeholder:"All Genres",allowClear:!1,width:"150px"}),$(".s2genre_select").on("select2:select",selectGenre),$(".s2genre_select").on("select2:unselect",selectGenre);var margin={top:10,right:60,bottom:10,left:60},width=$(".s2m").width()-margin.left-margin.right,height=$(".s2m").height()-margin.top-margin.bottom,y=d3.scaleBand().rangeRound([height,0]).padding(.2),x=d3.scaleLinear().range([0,width]),xAxis=d3.axisBottom(x).tickSize(-height).ticks(9).tickFormat(function(t){return 6===Math.abs(t)?"":5===Math.abs(t)?"32x":4===Math.abs(t)?"16x":3===Math.abs(t)?"8x":2===Math.abs(t)?"4x":1===Math.abs(t)?"2x":"even"}).tickSizeOuter(0),yAxis=d3.axisLeft(y).tickSize(0),colourS2=d3.scaleLinear().interpolate(d3.interpolateHcl).range([d3.rgb("#027296"),d3.rgb("#f2e6e6"),d3.rgb("#fa4d16")]),svg=d3.select(".s2m").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");svg.append("g").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis),change(dataset.he_all,!0);var r_margin={top:50,right:25,bottom:25,left:25},r_width=$(".s3-1").width()-r_margin.left-r_margin.right,r_height=r_width+100,color=d3.scaleOrdinal().range(["#EDC951","#CC333F","#00A0B0"]),radarChartOptions={w:r_width,h:r_height,margin:r_margin,maxValue:6,levels:2,roundStrokes:!0,color:color},data_he=[r_he_calls,r_he_feel,r_he_loves,r_he_leaves,r_he_falls,r_he_hits,r_he_died,r_he_moves],data_his=[r_his_feel,r_his_mother,r_his_cry,r_his_gun,r_his_finger,r_his_home,r_his_love,r_his_mind],data_him=[r_him_kiss,r_him_shot,r_him_touch,r_him_teach,r_him_hold,r_him_change,r_him_leave,r_him_tells],overall_he=[.206750465416835,.811130419965232,.488515490958309,1.03619697560001,.33258997838023,-1.06333869795091,-1.21714403402994,1.60651270035676],overall_his=[1.09069765588381,.117385761235349,1.42334532675438,-3.26193552489228,2.18153997162396,-.676035319403266,.748789767364394,.852242587780147],overall_him=[.766585741997716,-.0759586085221877,1.26981622831954,-3.1754942820731,1.15425331727356,2.43921556204211,-.263850156493949,.35588717844321],words_he=["calls","feels","loves","leaves","falls","hits","died","moves"],words_his=["feel","mother","cry","gun","finger","home","love","mind"],words_him=["kiss","shot","touch","teach","hold","change","leave","tells"],extrawords_he=["called","feel/felt","","left/leaving","fell/falling","hit","dies/die","moved/move"],extrawords_his=["feelings/feeling","mama/momma","cryin'","guns/rifle/shotgun","fingers","","loves/loving",""],extrawords_him=["kissed/kissing","shoots/shoot","touched/touchin'","teaches/taught","held/holds","changed/changin'","left","telling/told"];d3.selectAll(".radarData").on("change",selectRadarData),drawRadar(data_he,overall_he,"he/she",words_he,extrawords_he);