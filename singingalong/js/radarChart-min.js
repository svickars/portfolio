function RadarChart(t,e,l,a,r,s,n,i){function p(t){return t%2}function o(t,e){t.each(function(){for(var t=d3.select(this),l=t.text().split(/\s+/).reverse(),a,r=[],s=0,n=1.4,i=t.attr("y"),p=t.attr("x"),o=parseFloat(t.attr("dy")),c=t.text(null).append("tspan").attr("x",p).attr("y",i).attr("dy",o+"em");a=l.pop();)r.push(a),c.text(r.join(" ")),c.node().getComputedTextLength()>e&&(r.pop(),c.text(r.join(" ")),r=[a],c=t.append("tspan").attr("x",p).attr("y",i).attr("dy",1.4*++s+o+"em").text(a))})}var c={w:1e3,h:1e3,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:6,labelFactor:1,wrapWidth:60,opacityArea:.5,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:!1,color:d3.schemeCategory10},u=Math.min(a.w,a.h)/2,d=d3.scaleLinear().domain([-4,0,4]).interpolate(d3.interpolateHcl).range([d3.rgb("#027296"),d3.rgb("#C3BCBC"),d3.rgb("#fa4d16")]);if(void 0!==a)for(var m in a)void 0!==a[m]&&(c[m]=a[m]);var y=Math.max(c.maxValue,d3.max(e,function(t){return d3.max(t.map(function(t){return t.value}))})),h=e[0].map(function(t,e){return t.axis}),f=h.length,u=Math.min(c.w/2,c.h/2),x=d3.format(".1f"),g=2*Math.PI/f,v=d3.scaleLinear().range([0,u]).domain([-5,5]);d3.select(t).select("svg").remove();var b=d3.select(t).append("svg").attr("width",c.w+c.margin.left+c.margin.right).attr("height",c.h+c.margin.top+c.margin.bottom).attr("class","radar"+t),k=b.append("g").attr("transform","translate("+(c.w/2+c.margin.left)+","+(c.h/2+c.margin.top)+")"),M=k.append("defs").append("filter").attr("id","glow"),C=M.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),A=M.append("feMerge"),w=A.append("feMergeNode").attr("in","coloredBlur"),q=A.append("feMergeNode").attr("in","SourceGraphic"),B=k.append("g").attr("class","axisWrapper");B.selectAll(".levels").data(d3.range(1,c.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(t,e){return u/c.levels*t}).style("fill","none").style("stroke","#b5b5b5").style("fill-opacity",c.opacityCircles);var I=B.selectAll(".axis").data(h).enter().append("g").attr("class","axis");I.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return v(.85*y)*Math.cos(g*e+51.5-Math.PI/2)}).attr("y2",function(t,e){return v(.85*y)*Math.sin(g*e+51.5-Math.PI/2)}).attr("class","line").style("stroke","#dedede").style("stroke-dasharray","4,4").style("stroke-width","1px"),B.selectAll(".axisLabelBG").data(d3.range(0,c.levels+1).reverse()).enter().append("text").attr("class","axisLabelBG").attr("x",0).attr("y",function(t){return-t*u/c.levels}).attr("dy",function(t,e){return y*t==0?"-2.3em":"3em"}).text(function(t,e){return y*t==12?"MORE FEM.":y*t==6?"":y*t==0?"MORE MASC.":void 0}),B.selectAll(".axisLabel").data(d3.range(0,c.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",0).attr("y",function(t){return-t*u/c.levels}).attr("dy",function(t,e){return y*t==0?"-2.3em":"3em"}).text(function(t,e){return y*t==12?"MORE FEM.":y*t==6?"":y*t==0?"MORE MASC.":void 0});var z=1.1*u,L=e[0].length,P=b.append("g").classed("labels",!0);I.append("def").append("path").attr("id","label-path").attr("d","m0 "+-z+" a"+z+" "+z+" 0 1,1 -0.01 0");var R;I.append("text").attr("class","s3label").style("text-anchor","middle").append("textPath").attr("xlink:href","#label-path").attr("startOffset",function(t,e){return R=100*e/L+50/L+"%"}).text(function(t,e){return t});var W=d3.radialLine().curve(d3.curveLinearClosed).radius(function(t){return v(t.value)}).angle(function(t,e){return g*e-50});c.roundStrokes&&W.curve(d3.curveCardinalClosed);var j=k.selectAll(".radarWrapper").data(e).enter().append("g").attr("class","radarWrapper");j.append("path").attr("class","radarArea").attr("d",function(t,e){return W(t)}).style("fill","none").style("fill-opacity",0).transition().duration(2e3).style("fill",function(t,e){return d(r)}).style("fill-opacity",c.opacityArea);for(var S=j.append("path").attr("class","radarStroke").attr("d",function(t,e){return W(t)}).style("stroke-width",c.strokeWidth+"px").style("stroke",function(t,e){return d(r)}).style("fill","none"),E=S.node().getTotalLength(),O=1250,F=[0],m=1;m<e[0].length;m++){var G=b.append("path").datum([e[0][m-1],e[0][m]]).attr("d",W);F.push(F[m-1]+G.node().getTotalLength()),G.remove()}S.style("opacity",0).attr("stroke-dasharray",E+" "+E).attr("stroke-dashoffset",E).transition().duration(1250).style("opacity",1).attr("stroke-dashoffset",0),j.selectAll(".radarCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarCircle").attr("r",c.dotRadius).attr("cx",function(t,e){return v(t.value)*Math.cos(g*e-Math.PI/2)}).attr("cy",function(t,e){return v(t.value)*Math.sin(g*e-Math.PI/2)}).style("fill",function(t,e,l){return d(r)}).style("fill-opacity",0).transition().delay(function(t,e){return F[e]*(500/E)}).attr("r",c.dotRadius).attr("cx",function(t,e){return v(t.value)*Math.cos(g*e-50-Math.PI/2)}).attr("cy",function(t,e){return v(t.value)*Math.sin(g*e-50-Math.PI/2)}).style("fill",function(t,e,l){return 1e-6===t.value?"#fff":d(r)}).style("stroke",function(t,e,l){return 1e-6===t.value?d(r):"none"}).style("fill-opacity",1);var T=d3.select(t).append("div").attr("class","s3title").style("opacity",0);T.transition().duration(500).style("opacity",1);var N=s;if(N=r>=0?N.split("/")[1]:N.split("/")[0],"him/her"===s)var V=T.append("span").attr("class","s3title-hl").html(n).style("background-color",d(r)),D=T.append("span").attr("class","s3title-pronoun").html("&nbsp;"+N);else var D=T.append("span").attr("class","s3title-pronoun").html(N+"&nbsp;"),V=T.append("span").attr("class","s3title-hl").html(n).style("background-color",d(r));var H=d3.select(t).append("div").attr("class","s3dataBox").style("border-color",d(r));k.selectAll(".radarCircleWrapper").data(e).enter().append("g").attr("class","radarCircleWrapper").selectAll(".radarInvisibleCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*c.dotRadius).attr("cx",function(t,e){return v(t.value)*Math.cos(g*e-50-Math.PI/2)}).attr("cy",function(t,e){return v(t.value)*Math.sin(g*e-50-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mousemove",function(t,e){d3.select(this).style("stroke",d(r));var a="follow",p="feminine",o=0;t.freq>0?(p="feminine",o=4):(p="masculine",o=-4),a="him/her"===s?"precede":"follow",$(".s3dataBox").position({my:"left top",at:"left+10px bottom+10px",of:$(this),collision:"flip",within:".section3"}).css("border-color",d(r)).css("display","block").show(),$(".s3dataBox").html("<div class='s3dataBox_wrapper'><div class='tooltip-main'></div><div class='tooltip-example'></div></div>"),1e-6!=t.value?($(".tooltip-main").html("In <span class='underline tooltip-genre'></span> songs, the word <span class='underline'>"+n+"</span> <span class='tt-e'></span> is about <span class='underline'>"+x(Math.abs(t.freq))+"x</span> more likely to "+a+" a <span class='underline'>"+p+"</span> pronoun."),$(".tooltip-example").html("<div class='tt-fe-i'>For example... In <span class='underline tt-fe-sa'></span> <span class='underline tt-fe-st'></span> (<span class='tt-fe-sy'></span>):</div><div class='s3lyric1'></div><div class='s3lyric2'></div><div class='s3lyric3'></div>")):$(".tooltip-main").html("We could not find this word in this genre."),""!=i&&$(".tt-e").html("("+i+")"),$(".underline").css("border-color",d(r)).css("color",d(r)),0===e&&($(".tooltip-genre").html("blues"),$(".s3lyric1").html(l.supplemental.blues.lyric1),$(".s3lyric2").html(l.supplemental.blues.lyric2),$(".s3lyric3").html(l.supplemental.blues.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.blues.song),$(".tt-fe-sy").html(l.supplemental.blues.year)),1===e&&($(".tooltip-genre").html("country"),$(".s3lyric1").text(l.supplemental.country.lyric1),$(".s3lyric2").text(l.supplemental.country.lyric2),$(".s3lyric3").text(l.supplemental.country.lyric3),$(".tt-fe-sa").html(l.supplemental.country.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.country.song),$(".tt-fe-sy").html(l.supplemental.country.year)),2===e&&($(".tooltip-genre").html("electronic"),$(".s3lyric1").text(l.supplemental.electronic.lyric1),$(".s3lyric2").text(l.supplemental.electronic.lyric2),$(".s3lyric3").text(l.supplemental.electronic.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.electronic.song),$(".tt-fe-sy").html(l.supplemental.electronic.year)),3===e&&($(".tooltip-genre").html("folk"),$(".s3lyric1").text(l.supplemental.folk.lyric1),$(".s3lyric2").text(l.supplemental.folk.lyric2),$(".s3lyric3").text(l.supplemental.folk.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.folk.song),$(".tt-fe-sy").html(l.supplemental.folk.year)),4===e&&($(".tooltip-genre").html("hip-hop"),$(".s3lyric1").text(l.supplemental.hiphop.lyric1),$(".s3lyric2").text(l.supplemental.hiphop.lyric2),$(".s3lyric3").text(l.supplemental.hiphop.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.hiphop.song),$(".tt-fe-sy").html(l.supplemental.hiphop.year)),5===e&&($(".tooltip-genre").html("jazz"),$(".s3lyric1").text(l.supplemental.jazz.lyric1),$(".s3lyric2").text(l.supplemental.jazz.lyric2),$(".s3lyric3").text(l.supplemental.jazz.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.jazz.song),$(".tt-fe-sy").html(l.supplemental.jazz.year)),6===e&&($(".tooltip-genre").html("metal"),$(".s3lyric1").text(l.supplemental.metal.lyric1),$(".s3lyric2").text(l.supplemental.metal.lyric2),$(".s3lyric3").text(l.supplemental.metal.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.metal.song),$(".tt-fe-sy").html(l.supplemental.metal.year)),7===e&&($(".tooltip-genre").html("oldies"),$(".s3lyric1").text(l.supplemental.oldies.lyric1),$(".s3lyric2").text(l.supplemental.oldies.lyric2),$(".s3lyric3").text(l.supplemental.oldies.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.oldies.song),$(".tt-fe-sy").html(l.supplemental.oldies.year)),8===e&&($(".tooltip-genre").html("other"),$(".s3lyric1").text(l.supplemental.other.lyric1),$(".s3lyric2").text(l.supplemental.other.lyric2),$(".s3lyric3").text(l.supplemental.other.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.other.song),$(".tt-fe-sy").html(l.supplemental.other.year)),9===e&&($(".tooltip-genre").html("pop"),$(".s3lyric1").text(l.supplemental.pop.lyric1),$(".s3lyric2").text(l.supplemental.pop.lyric2),$(".s3lyric3").text(l.supplemental.pop.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.pop.song),$(".tt-fe-sy").html(l.supplemental.pop.year)),10===e&&($(".tooltip-genre").html("reggae"),$(".s3lyric1").text(l.supplemental.reggae.lyric1),$(".s3lyric2").text(l.supplemental.reggae.lyric2),$(".s3lyric3").text(l.supplemental.reggae.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.reggae.song),$(".tt-fe-sy").html(l.supplemental.reggae.year)),11===e&&($(".tooltip-genre").html("rock"),$(".s3lyric1").text(l.supplemental.rock.lyric1),$(".s3lyric2").text(l.supplemental.rock.lyric2),$(".s3lyric3").text(l.supplemental.rock.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.rock.song),$(".tt-fe-sy").html(l.supplemental.rock.year)),12===e&&($(".tooltip-genre").html("soul"),$(".s3lyric1").text(l.supplemental.soul.lyric1),$(".s3lyric2").text(l.supplemental.soul.lyric2),$(".s3lyric3").text(l.supplemental.soul.lyric3),$(".tt-fe-sa").html(l.supplemental.blues.artist+"&rsquo;s"),$(".tt-fe-st").html(l.supplemental.soul.song),$(".tt-fe-sy").html(l.supplemental.soul.year))}).on("mouseleave",function(){$(this).css("stroke","none"),$(".s3dataBox").stop().fadeOut(function(){$(this).removeAttr("style")})})}function UpdateRadarChart(t,e,l,a){d3.selectAll(".s3dataBox").remove();var r=d3.selectAll(".radarStroke"),s=d3.selectAll(".radarArea"),n=d3.selectAll(".radarCircle"),i=d3.selectAll(".s3title"),p=r.node().getTotalLength()+100;i.transition().duration(500).style("opacity",0).remove(),r.attr("stroke-dashoffset",0).transition().duration(750).attr("stroke-dasharray",p+" "+p).attr("stroke-dashoffset",-p),s.transition().duration(750).style("opacity",0),n.transition().duration(750).style("opacity",0)}