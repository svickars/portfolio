function numbered(s){var t=s%10,i=s%100;return 1==t&&11!=i?s+"st":2==t&&12!=i?s+"nd":3==t&&13!=i?s+"rd":s+"th"}function drawAverage(){d3.csv("data/expectation.csv",function(s,t){if(s)throw s;var i=d3.line().curve(d3.curveCardinal).x(function(s){return x(parseInt(s.round.toString().split(".")[0])+roundpick(parseFloat("."+s.round.toString().split(".")[1])))}).y(function(s){return y3(s.avg)}),a=d3.transition().duration(3e3).ease(d3.easeLinear);svg.append("path").datum(t).attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("class","avgline").attr("d",i).attr("stroke-dasharray",function(s){return this.getTotalLength()}).attr("stroke-dashoffset",function(s){return this.getTotalLength()}).transition(a).attr("stroke-dashoffset",0)})}function removeAverage(){d3.selectAll(".avgline").transition().duration(500).style("opacity",0).style("display","none").remove()}var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),jQuery(document).ready(function($){$(".cd-subnav-trigger").on("click",function(s){s.preventDefault(),$(".cd-main-nav").toggleClass("moves-out"),$("#menulink").toggleClass(".menulink-opp"),$(".cd-logo").toggleClass(".cd-logo-opp")})});var titleHeight=$(".title").height();$(".btn-group > .btn").click(function(){$(this).addClass("active").siblings().removeClass("active")});var margin={top:75,right:20,bottom:30,left:50},width=$(".chart").width()-margin.left-margin.right,height=window.innerHeight-130-margin.top-margin.bottom,GPo=.65,noGPo=.25,teamlist=[1,2,3,4,5,6,7,8,9,10,11,12,13,13,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],teamAbb=["","ANA","ARI","BOS","BUF","CGY","CAR","CHI","COL","CBJ","DAL","DET","EDM","FLA","LAK","MIN","MTL","NSH","NJD","NYI","NYR","OTT","PHI","PIT","STL","SJS","TBL","TOR","VAN","VGK","WSH","WPG"],y=d3.scaleLinear().range([0,height]),x=d3.scaleLinear().range([0,width]),y2=d3.scaleLinear().range([0,height]).domain([1,253]),x2=d3.scaleLinear().range([0,width]).domain([1,31]),y3=d3.scaleLinear().range([0,height]).domain([1.5,0]),radius=d3.scaleLinear().range([2,2,8,15]).domain([-.338793103,0,.9,1.458436482]),roundpick=d3.scaleLinear().range([.1,.99]),svg=d3.select(".chart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),xLabel=d3.select(".chart").append("div").attr("class","xLabel").style("left","65px").style("top","20px"),yLabel=d3.select(".chart").append("div").attr("class","yLabel").style("left","-10px").style("top","83px");$(".xLabel").html('Pick Number <i class="far fa-long-arrow-right"></i>'),$(".yLabel").fadeOut(function(){$(this).html('<i class="far fa-long-arrow-left"></i> Year')}).fadeIn(),d3.csv("data/DRAFT-GAMESCORE.csv",function(s,t){function i(s,t){isMobile?$(".playertip").css("display","block").css("left",width/2-100+"px").css("width","300px"):$(".playertip").css("display","block").css("right","150px").css("bottom","100px").css("width","300px"),GPo=.05,noGPo=.05,d3.selectAll(".circlesGP:not(#"+s.playerCode+")").style("opacity",GPo).style("pointer-events","none").style("stroke","none"),d3.selectAll(".circlesNoGP:not(#"+s.playerCode+")").style("opacity",noGPo).style("pointer-events","none").style("stroke","none"),d3.select("#"+s.playerCode).style("opacity",1).style("stroke","black").style("stroke-width",2).style("pointer-events","none"),"G"!=s.pos?$(".playertip").html("<div class='pt-meta' style='width: 300px'></div><div class='pt-header' style='width: 300px; min-height: 50px'></div><div class='pt-main' style='width: 300px'><div class='pt-main1'></div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div><div class='footnote1'></div></div>"):$(".playertip").html("<div class='pt-meta' style='width: 300px'></div><div class='pt-header' style='width: 300px; min-height: 50px'></div><div class='pt-main' style='width: 300px'><div class='pt-main1'></div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div></div>"),$(".pt-meta").css("background-color",s.colour).css("border","1px solid "+s.colour).html(s.team+" / Round "+s.roundPick+" / "+numbered(s.overall)+" OA / "+s.year),$(".pt-meta").css("padding-right","25px"),d3.select(".playertip").append("div").attr("class","tipclose").html('<i class="far fa-times-circle"></i>'),$(".pt-header").html(s.player),$(".pt-main1").html("Age: "+s.age+"&nbsp;&nbsp;&nbsp;&nbsp;Nationality: "+s.nat+"&nbsp;&nbsp;&nbsp;&nbsp;Position: "+s.pos),d3.selectAll(".playertip").on("click",function(s){$(".circlesGP").css("stroke","none").css("opacity",.65),$(".circlesNoGP").css("stroke","none").css("opacity",.25),$(".playertip").css("display","none"),$("#playersearch").val(null).trigger("change"),d3.selectAll(".circlesGP").style("display","block").style("opacity",.65).style("stroke","none").style("pointer-events","all"),d3.selectAll(".circlesNoGP").style("display","block").style("opacity",.25).style("stroke","none").style("pointer-events","all")})}function a(){removeAverage();var s=$(this).val();d3.selectAll(".circlesGP."+s).style("display","block").transition().duration(500).style("opacity",GPo),d3.selectAll(".circlesNoGP."+s).style("display","block").transition().duration(500).style("opacity",noGPo),d3.selectAll(".circlesGP:not(."+s+")").transition().duration(500).style("opacity",0).style("display","none"),d3.selectAll(".circlesNoGP:not(."+s+")").transition().duration(500).style("opacity",0).style("display","none")}function e(){removeAverage(),GPo=.65,noGPo=.25,d3.selectAll(".circlesGP").style("display","block").transition().duration(500).style("opacity",GPo),d3.selectAll(".circlesNoGP").style("display","block").transition().duration(500).style("opacity",noGPo)}function n(){var s=$(this).val(),a=t.filter(function(t){return t.playerCode===s});a=a[0],i(a)}function d(){GPo=.65,noGPo=.25,d3.selectAll(".circlesGP").style("display","block").style("opacity",GPo).style("stroke","none").style("pointer-events","all"),d3.selectAll(".circlesNoGP").style("display","block").style("opacity",noGPo).style("stroke","none").style("pointer-events","all")}function c(){removeAverage();var s=$(".statselect").val(),i=$(".timeselect:checked").val(),a=$(".viewselect:checked").val();"avg_GS"===s?radius.range([2,2,8,15]).domain([-.338793103,0,.9,1.458436482]):radius.range([5,17.5,25]).domain([0,5,20]),f.transition().duration(500).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}),h.transition().duration(500).attr("r",function(s){return 2}),"view2"===a&&(x.domain([1,31]),y.domain([0,253]),f.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(s.teamNumber)}).attr("cy",function(t){return y(t[s+i+"_rank"])}).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}),h.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(s.teamNumber)}).attr("cy",function(t){return y(t[s+i+"_rank"])}).attr("r",function(s){return 2})),"view3"===a&&($(".yLabel").fadeOut(function(){$(this).html('<i class="far fa-long-arrow-left"></i> &nbsp;'+$(".statselect").find("option:selected").attr("definition"))}).fadeIn(),x.range([0,width]).domain([1.1,11.825]),y3.domain([d3.max(t,function(t){return t[s+i]}),0]),svg.select(".y3").transition().duration(1e3).ease(d3.easeExp).call(u),f.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(t){return y3(t[s+i])}).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}))}function l(){var s=$(".statselect").val(),i=$(".timeselect:checked").val(),a=$(".viewselect:checked").val();"avg_GS"===s?radius.range([2,2,8,15]).domain([-.338793103,0,.9,1.458436482]):radius.range([5,17.5,25]).domain([0,5,20]),d3.selectAll(".axis").transition().duration(500).style("opacity",0),d3.select(".roundclose").transition().duration(300).style("opacity",0).style("display","none"),"view1"===a&&(d3.selectAll(".v1a").transition().duration(500).style("opacity",1),$(".xLabel").fadeOut(function(){$(this).html('Pick Number <i class="far fa-long-arrow-right"></i>')}).fadeIn(),$(".yLabel").fadeOut(function(){$(this).html('<i class="far fa-long-arrow-left"></i> Year')}).fadeIn(),x.range([0,width]).domain([1.1,11.825]),svg.select(".x1").call(o),y.domain([1992,2016]),roundpick.domain([.01,.35]),f.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(s){return y(s.year)}),h.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(s){return y(s.year)})),"view2"===a&&(d3.selectAll(".v2a").transition().duration(500).style("opacity",1),$(".xLabel").fadeOut(function(){$(this).html('Team <i class="far fa-long-arrow-right"></i>')}).fadeIn(),$(".yLabel").fadeOut(function(){$(this).html('<i class="far fa-long-arrow-left"></i> Rank')}).fadeIn(),x.domain([1,31]).range([0,width]),y.domain([1,253]),f.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(s.teamNumber)}).attr("cy",function(t){return y(t[s+i+"_rank"])}).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}),h.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(s.teamNumber)}).attr("cy",function(t){return y(t[s+i+"_rank"])}).attr("r",function(s){return 2})),"view3"===a&&(d3.selectAll(".v3a").transition().duration(500).style("opacity",1),d3.selectAll(".x1").transition().duration(500).style("opacity",1),$(".xLabel").fadeOut(function(){$(this).html('Pick Number <i class="far fa-long-arrow-right"></i>')}).fadeIn(),$(".yLabel").fadeOut(function(){$(this).html('<i class="far fa-long-arrow-left"></i> &nbsp;'+$(".statselect").find("option:selected").attr("definition"))}).fadeIn(),x.range([0,width]).domain([1.1,11.825]),y3.domain([d3.max(t,function(t){return t[s+i]}),0]),svg.select(".x1").call(o),svg.select(".y3").call(u),f.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(t){return y3(t[s+i])}).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}),h.transition().duration(1e3).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(t){return y3(t[s+i])}).attr("r",function(t){return t[s+i]>0?radius(t[s+i]):2}))}function r(s){var t=s+.1,i=s+.99;1===s?x.range([0,width/2,width]).domain([1.1,1.99,11.825]):x.range([0,s*(width/2/11),width/2+s*(width/2/11),width]).domain([1.1,t,i,11.825]),o.tickFormat(function(s){return isMobile?s.toString().split(".")[0]:"Round "+s.toString().split(".")[0]}),svg.select(".x1").transition().duration(300).ease(d3.easeExp).call(o),f.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),h.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),isMobile?d3.select(".roundclose").style("left",x(t)+80+"px").style("display","block").transition().duration(300).style("opacity",1):d3.select(".roundclose").style("left",x(t)+115+"px").style("display","block").transition().duration(300).style("opacity",1),d3.select(".roundclose").on("click",function(){x.range([0,width]).domain([1.1,11.825]),o.tickFormat(function(s){return isMobile?numbered(parseInt(s.toString().split(".")[0])):"Round "+s.toString().split(".")[0]}),svg.select(".x1").transition().duration(300).ease(d3.easeExp).call(o),f.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),h.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),d3.select(this).transition().duration(300).style("opacity",0).style("display","none")})}if(s)throw s;t.forEach(function(s){s.overall=parseFloat(s.overall),s.year=parseInt(s.year),s.roundPick=parseFloat(s.roundPick),s.GP_c=parseInt(s.GP_c)}),noGP=t.filter(function(s){return s.GP_c<1}),plusGP=t.filter(function(s){return s.GP_c>0}),x.domain([1.1,11.825]),y.domain([1992,2016]),roundpick.domain([.01,.3]);var o=d3.axisTop(x).tickSize(-(height+margin.top/2)).tickFormat(function(s){return isMobile?numbered(parseInt(s.toString().split(".")[0])):"Round "+s.toString().split(".")[0]}).tickValues([1.1,2.1,3.1,4.1,5.1,6.1,7.1,8.1,9.1,10.1,11.1]),p=d3.axisTop(x2).tickSize(0).tickFormat(function(s){return teamAbb[s]}).tickValues([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),v=d3.axisLeft(y).tickSize(0).tickFormat(d3.format("")),b=d3.axisLeft(y2).tickSize(-width).tickFormat(d3.format("")).tickValues([1,25,50,75,100,150,200]),u=d3.axisLeft(y3).tickSize(-width);svg.append("g").attr("class","x axis v2a").style("opacity",0).attr("transform","translate(0,-"+.25*margin.top+")").call(p),svg.append("g").attr("class","y axis v1a").attr("transform","translate(-10,0)").style("text-anchor","end").call(v),svg.append("g").attr("class","y y3 axis v3a").attr("transform","translate(-10,0)").style("opacity",0).style("text-anchor","end").call(u),svg.append("g").attr("class","y axis v2a").attr("transform","translate(-10,0)").style("opacity",0).style("text-anchor","end").call(b),svg.append("g").attr("class","x x1 axis v1a xaxislabels").attr("id","v1xAxis").style("text-anchor","start").attr("transform","translate(0,-"+.25*margin.top+")").call(o),d3.select("#v1xAxis").selectAll("text").attr("id",function(s,t){return"axisText-"+t});var g=d3.tip().attr("class","d3-tip").direction("s").offset([10,0]).html(function(s){
return isMobile?"G"!=s.pos?"<div class='tipclose'><i class='far fa-times-circle'></i></div><div class='pt-meta' style='background-color: "+s.colour+"; border: 1px solid "+s.colour+"; padding-right: 25px'>"+s.team+" / Round "+s.roundPick+" / "+numbered(s.overall)+" OA / "+s.year+"</div><div class='pt-header'>"+s.player+"</div><div class='pt-main'><div class='pt-main1'>Age:"+s.age+"&nbsp;&nbsp;&nbsp;&nbsp;Nationality: "+s.nat+"&nbsp;&nbsp;&nbsp;&nbsp;Position: "+s.pos+"</div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_c)+"</div></div><br><div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_f)+"</div></div><br><div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div><div class='footnote1'></div></div>":"<div class='tipclose'><i class='far fa-times-circle'></i></div><div class='pt-meta' style='background-color: "+s.colour+"; border: 1px solid "+s.colour+"; padding-right: 25px'>"+s.team+" / Round "+s.roundPick+" / "+numbered(s.overall)+" OA / "+s.year+"</div><div class='pt-header'>"+s.player+"</div><div class='pt-main'><div class='pt-main1'>Age:"+s.age+"&nbsp;&nbsp;&nbsp;&nbsp;Nationality: "+s.nat+"&nbsp;&nbsp;&nbsp;&nbsp;Position: "+s.pos+"</div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div><br><div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div><br><div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div></div>":"G"!=s.pos?"<div class='pt-meta' style='background-color: "+s.colour+"; border: 1px solid "+s.colour+"'>"+s.team+" / Round "+s.roundPick+" / "+numbered(s.overall)+" OA / "+s.year+"</div><div class='pt-header'>"+s.player+"</div><div class='pt-main'><div class='pt-main1'>Age:"+s.age+"&nbsp;&nbsp;&nbsp;&nbsp;Nationality: "+s.nat+"&nbsp;&nbsp;&nbsp;&nbsp;Position: "+s.pos+"</div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_c)+"</div></div><br><div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>+/-</div><div class='sbb'>"+parseInt(s.PlusMinus_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PIM</div><div class='sbb'>"+parseInt(s.PIM_f)+"</div></div><br><div class='statbox'><div class='sbt'>SOG</div><div class='sbb'>"+parseInt(s.SOG_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Hits</div><div class='sbb'>"+parseInt(s.Hits_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>Blks</div><div class='sbb'>"+parseInt(s.Blocks_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div><div class='footnote1'></div></div>":"<div class='pt-meta' style='background-color: "+s.colour+"; border: 1px solid "+s.colour+"'>"+s.team+" / Round "+s.roundPick+" / "+numbered(s.overall)+" OA / "+s.year+"</div><div class='pt-header'>"+s.player+"</div><div class='pt-main'><div class='pt-main1'>Age:"+s.age+"&nbsp;&nbsp;&nbsp;&nbsp;Nationality: "+s.nat+"&nbsp;&nbsp;&nbsp;&nbsp;Position: "+s.pos+"</div><div class='pt-career'><h5>Career</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div><br><div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_c)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_c).toFixed(2)+"</div></div></div>        <div class='pt-career'><h5>five years after draft</h5><div class='statbox'><div class='sbt'>GP</div><div class='sbb'>"+parseInt(s.GP_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GS</div><div class='sbb'>"+parseInt(s.gGS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>W</div><div class='sbb'>"+parseInt(s.gW_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>L</div><div class='sbb'>"+parseInt(s.gL_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>SV%</div><div class='sbb'>"+parseFloat(s.gSVper_c).toFixed(2)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>GAA</div><div class='sbb'>"+s.gGAA_c+"</div></div><br><div class='statbox'><div class='sbt'>SO</div><div class='sbb'>"+parseInt(s.gSO_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>G</div><div class='sbb'>"+parseInt(s.G_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>A</div><div class='sbb'>"+parseInt(s.A_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>PTS</div><div class='sbb'>"+parseInt(s.PTS_f)+"</div></div>&nbsp;&nbsp;&nbsp;<div class='statbox'><div class='sbt'>AGS</div><div class='sbb'>"+parseFloat(s.avg_GS_f).toFixed(2)+"</div></div></div></div>"});svg.call(g);var f=svg.selectAll(".circlesGP").data(plusGP).enter().append("circle").attr("class",function(s){return"circlesGP pos-"+s.pos+" team-"+s.teamNumber+" round-"+s.roundPick.toString().split(".")[0]}).attr("id",function(s){return s.playerCode}).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(s){return y(s.year)}).attr("r",function(s){return radius(s.avg_GS_c)}).style("fill",function(s){return s.colour}).style("opacity",function(s){return GPo}),h=svg.selectAll(".circlesNoGP").data(noGP).enter().append("circle").attr("class",function(s){return"circlesNoGP pos-"+s.pos+" team-"+s.teamNumber+" round-"+s.roundPick.toString().split(".")[0]}).attr("id",function(s){return s.playerCode}).attr("r",5).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}).attr("cy",function(s){return y(s.year)}).attr("r",function(s){return 2}).style("fill",function(s){return s.colour}).style("opacity",function(s){return noGPo});if(isMobile){var m=!1;d3.select(".pt-meta").append("div").attr("class","tipclose").html('<i class="far fa-times-circle"></i>'),f.on("click",function(s){i(s)}),h.on("click",function(s){i(s)})}else f.on("mouseover",g.show).on("mouseout",g.hide),h.on("mouseover",g.show).on("mouseout",g.hide);$(".statselect").select2({allowClear:!1,width:"150px"}),$(".positionselect").select2({placeholder:"Filter by position",allowClear:!0,width:"150px",minimumResultsForSearch:10}),$(".statselect").on("select2:select",c),$(".timeselect").on("change",c),$(".viewselect").on("change",l),$(".positionselect").on("select2:select",a),$(".positionselect").on("select2:unselect",e);var k=d3.select(".playersearch");$(".playersearch").select2({placeholder:"Find a player...",allowClear:!0,width:"150px"}),$(".playersearch").on("select2:select",n),$(".playersearch").on("select2:unselect",d),k.append("option").attr("value","").text(""),k.selectAll(".searchoptions").data(t.sort(function(s,t){return d3.ascending(s.player,t.player)})).enter().append("option").attr("class","searchoptions").attr("value",function(s){return s.playerCode}).text(function(s){return s.player});for(var S=0;S<11;S++)$("#axisText-"+S).click(function(s){r(parseInt(s.target.id.split("-")[1])+1)});var G=new ScrollMagic.Scene({triggerElement:"#chapter4",triggerHook:".75"}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?(x.range([0,width]).domain([1.1,11.825]),o.tickFormat(function(s){return isMobile?numbered(parseInt(s.toString().split(".")[0])):"Round "+s.toString().split(".")[0]}),svg.select(".x1").transition().duration(300).ease(d3.easeExp).call(o),f.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),h.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),d3.select(".roundclose").transition().duration(300).style("opacity",0).style("display","none")):r(1)}),P=new ScrollMagic.Scene({triggerElement:"#chapter4",triggerHook:".25"}).addTo(controller).on("progress",function(s){r("REVERSE"===s.scrollDirection?1:6)}),_=new ScrollMagic.Scene({triggerElement:"#chapter4",triggerHook:0}).addTo(controller).on("progress",function(s){"FORWARD"===s.scrollDirection?(x.range([0,width]).domain([1.1,11.825]),o.tickFormat(function(s){return isMobile?numbered(parseInt(s.toString().split(".")[0])):"Round "+s.toString().split(".")[0]}),svg.select(".x1").transition().duration(300).ease(d3.easeExp).call(o),f.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),h.transition().duration(300).ease(d3.easeExp).attr("cx",function(s){return x(parseInt(s.roundPick.toString().split(".")[0])+roundpick(parseFloat("."+s.roundPick.toString().split(".")[1])))}),d3.select(".roundclose").transition().duration(300).style("opacity",0).style("display","none")):r(6)})});var playertip=d3.select(".chart").append("div").attr("class","playertip"),roundclose=d3.select(".chart").append("div").attr("class","roundclose").html('<i class="far fa-times-circle"></i>');isMobile&&$(".stb").html("Use the filters above to show selected positions and size by various statistics and time periods. Tap a player&rsquo;s circle to show their statistics. Tap a tick label (i.e. <span class='serif'>ROUND 1</span>) below to zoom in on that round."),$("#gClose").on("click",function(){$("#modal").css("display","none"),$("#modaloverlay").css("display","none")}),$("#modaloverlay").on("click",function(){$("#modal").css("display","none"),$("#modaloverlay").css("display","none")}),$(".glosLink").on("click",function(){$("#modal").css("display","block"),$("#modaloverlay").css("display","flex")});var topheight=document.getElementById("maintitle").offsetHeight+document.getElementById("chartintro").offsetHeight;$("#chapter1").css("top",topheight+"px"),$("#chapter2").css("top",topheight+window.innerHeight+"px"),$("#chapter3").css("top",topheight+2*window.innerHeight+"px"),$("#chapter4").css("top",topheight+3*window.innerHeight+"px"),$("#chapter5").css("top",topheight+4*window.innerHeight+"px"),$("#chapter6").css("top",topheight+5*window.innerHeight+"px"),$("#chapter7").css("top",topheight+6*window.innerHeight+"px"),$("#chapter8").css("top",topheight+7*window.innerHeight+"px"),$("#chapter9").css("top",topheight+8*window.innerHeight+"px"),$("#chapter10").css("top",topheight+9*window.innerHeight+"px");var controller=new ScrollMagic.Controller,scene=new ScrollMagic.Scene({triggerElement:"#lockthis",duration:7*window.innerHeight,triggerHook:0}).setPin("#lockthis").addTo(controller),chapter2=new ScrollMagic.Scene({triggerElement:"#chapter2"}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?$("#radio_c").prop("checked",!0).change():$("#radio_f").prop("checked",!0).change()}),chapter3=new ScrollMagic.Scene({triggerElement:"#chapter3"}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.25),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.75),$("#radio_f").prop("checked",!0).change()):(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.75),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.05),$("#radio_c").prop("checked",!0).change())}),chapter3two=new ScrollMagic.Scene({triggerElement:"#chapter3",triggerHook:0}).addTo(controller).on("progress",function(s){"FORWARD"===s.scrollDirection?(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.25),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.75),$("#radio_c").prop("checked",!0).change()):(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.75),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.05),$("#radio_f").prop("checked",!0).change())}),chapter3three=new ScrollMagic.Scene({triggerElement:"#chapter3",triggerHook:"onLeave"}).addTo(controller).on("progress",function(s){"FORWARD"===s.scrollDirection?(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.25),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.75)):(d3.selectAll(".circlesNoGP").transition().duration(300).style("opacity",.75),d3.selectAll(".circlesGP").transition().duration(300).style("opacity",.05))});d3.selectAll(".playerHighlight").on("mouseover",function(s){var t=d3.select(this).attr("id");$(".playersearch").val(t),$(".playersearch").trigger("change"),$(".playersearch").trigger("select2:select")}).on("mouseout",function(s){$(".playersearch").val(null),$(".playersearch").trigger("change"),$(".playersearch").trigger("select2:unselect"),$(".playertip").css("display","none")});var chapter5=new ScrollMagic.Scene({triggerElement:"#chapter5"}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?($("#viewselect1").prop("checked",!0).change(),$("#byyearbutton").addClass("active"),$("#byteambutton").removeClass("active")):($("#viewselect2").prop("checked",!0).change(),$("#byyearbutton").removeClass("active"),$("#byteambutton").addClass("active"),$(".statselect").val("PTS_ss"),$(".statselect").trigger("change"),$(".statselect").trigger("select2:select"))}),chapter6two=new ScrollMagic.Scene({triggerElement:"#chapter6",triggerHook:.5}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?($(".statselect").val("PTS_ss"),$(".statselect").trigger("change"),$(".statselect").trigger("select2:select"),$(".positionselect").val("null"),$(".positionselect").trigger("change"),$(".positionselect").trigger("select2:unselect"),removeAverage()):($(".statselect").val("avg_GS"),$(".statselect").trigger("change"),$(".statselect").trigger("select2:select"),$(".positionselect").val("pos-RW"),$(".positionselect").trigger("change"),$(".positionselect").trigger("select2:select"),drawAverage())}),chapter6=new ScrollMagic.Scene({triggerElement:"#chapter6"}).addTo(controller).on("progress",function(s){"REVERSE"===s.scrollDirection?($("#viewselect2").prop("checked",!0).change(),$("#byteambutton").addClass("active"),$("#byvaluebutton").removeClass("active")):($("#viewselect3").prop("checked",!0).change(),$("#byteambutton").removeClass("active"),$("#byvaluebutton").addClass("active"))});